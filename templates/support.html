<!DOCTYPE html>
<html lang="fr">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta charset="UTF-8">
  <title>DriveGo - Support & Assistance</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='CSS/support.css') }}">
</head>
<body>
  <header>
    <a href="{{ url_for('index') }}" class="logo">
      <img src="../static/images/logo perce-neige.PNG" alt="Logo Fondation Perce-Neige" class="logo-image">
    </a>
    <nav>
      <a href="{{ url_for('index') }}">Accueil</a>
      <a href="{{ url_for('support') }}" class="active">Support</a>
    </nav>
  </header>

  <main>
    <h2 class="page-title">Support & Assistance</h2>

    <!-- Section NumÃ©ros Utiles -->
    <div class="support-grid">
      
      <!-- NumÃ©ros d'urgence -->
      <div class="support-card emergency">
        <div class="card-header emergency-header">
          <h3>ğŸš¨ NumÃ©ros d'Urgence</h3>
          <p>En cas d'accident grave ou de danger immÃ©diat</p>
        </div>
        <div class="contact-list">
          <div class="contact-item urgent">
            <div class="contact-icon">ğŸš‘</div>
            <div class="contact-info">
              <span class="contact-label">SAMU</span>
              <a href="tel:15" class="contact-number">15</a>
              <span class="contact-desc">Urgences mÃ©dicales</span>
            </div>
          </div>
          <div class="contact-item urgent">
            <div class="contact-icon">ğŸš’</div>
            <div class="contact-info">
              <span class="contact-label">Pompiers</span>
              <a href="tel:18" class="contact-number">18</a>
              <span class="contact-desc">Incendie, dÃ©sincarcÃ©ration</span>
            </div>
          </div>
          <div class="contact-item urgent">
            <div class="contact-icon">ğŸ‘®</div>
            <div class="contact-info">
              <span class="contact-label">Police/Gendarmerie</span>
              <a href="tel:17" class="contact-number">17</a>
              <span class="contact-desc">Accident, vol, agression</span>
            </div>
          </div>
          <div class="contact-item urgent">
            <div class="contact-icon">ğŸ“</div>
            <div class="contact-info">
              <span class="contact-label">Urgences EuropÃ©ennes</span>
              <a href="tel:112" class="contact-number">112</a>
              <span class="contact-desc">NumÃ©ro unique europÃ©en</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Contacts Entreprise -->
      <div class="support-card company">
        <div class="card-header company-header">
          <h3>ğŸ¢ Contacts Entreprise</h3>
          <p>Pour toute assistance relative aux vÃ©hicules</p>
        </div>
        <div class="contact-list">
          <div class="contact-item">
            <div class="contact-icon">ğŸ‘¨â€ğŸ’¼</div>
            <div class="contact-info">
              <span class="contact-label">Responsable Flotte</span>
              <a href="tel:+33123456789" class="contact-number">01 23 45 67 89</a>
              <span class="contact-email">flotte@fondation-perceneige.org</span>
            </div>
          </div>
          <div class="contact-item priority">
            <div class="contact-icon">ğŸ“</div>
            <div class="contact-info">
              <span class="contact-label">Astreinte (24h/24)</span>
              <a href="tel:+33612345678" class="contact-number">06 12 34 56 78</a>
              <span class="contact-desc">Urgences vÃ©hicules uniquement</span>
            </div>
          </div>
          <div class="contact-item">
            <div class="contact-icon">ğŸ”§</div>
            <div class="contact-info">
              <span class="contact-label">Service Technique</span>
              <a href="tel:+33123456791" class="contact-number">01 23 45 67 91</a>
              <span class="contact-email">technique@fondation-perceneige.org</span>
            </div>
          </div>
          <div class="contact-item">
            <div class="contact-icon">ğŸ“‹</div>
            <div class="contact-info">
              <span class="contact-label">SecrÃ©tariat</span>
              <a href="tel:+33123456790" class="contact-number">01 23 45 67 90</a>
              <span class="contact-email">secretariat@fondation-perceneige.org</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Services Externes -->
      <div class="support-card external">
        <div class="card-header external-header">
          <h3>ğŸ› ï¸ Services Externes</h3>
          <p>DÃ©pannage et assistance technique</p>
        </div>
        <div class="contact-list">
          <div class="contact-item">
            <div class="contact-icon">ğŸš—</div>
            <div class="contact-info">
              <span class="contact-label">DÃ©pannage Auto</span>
              <a href="tel:+33123456792" class="contact-number">01 23 45 67 92</a>
              <span class="contact-desc">24h/24 - 7j/7</span>
            </div>
          </div>
          <div class="contact-item">
            <div class="contact-icon">ğŸ›</div>
            <div class="contact-info">
              <span class="contact-label">Pneumatiques Express</span>
              <a href="tel:+33123456793" class="contact-number">01 23 45 67 93</a>
              <span class="contact-desc">Intervention rapide</span>
            </div>
          </div>
          <div class="contact-item">
            <div class="contact-icon">ğŸ¥</div>
            <div class="contact-info">
              <span class="contact-label">Assurance VÃ©hicule</span>
              <a href="tel:+33123456795" class="contact-number">01 23 45 67 95</a>
              <span class="contact-desc">DÃ©claration sinistre</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Formulaire de Signalement -->
    <div class="incident-form-container">
      <div class="form-card">
        <div class="card-header incident-header">
          <h3>ğŸ“ Signaler un Incident</h3>
          <p>DÃ©crivez votre problÃ¨me pour obtenir une assistance rapide</p>
        </div>
        
        <!-- Indicateur de progression -->
        <div class="form-progress">
          <div class="progress-step active" data-step="1">
            <span class="step-number">1</span>
            <span class="step-label">Informations</span>
          </div>
          <div class="progress-step" data-step="2">
            <span class="step-number">2</span>
            <span class="step-label">Incident</span>
          </div>
          <div class="progress-step" data-step="3">
            <span class="step-number">3</span>
            <span class="step-label">Contact</span>
          </div>
        </div>
        
        <form id="incident-form" class="incident-form">
          
          <!-- Ã‰tape 1: Informations gÃ©nÃ©rales -->
          <div class="form-step active" id="step-1">
            <h4 class="step-title">Informations gÃ©nÃ©rales</h4>
            
            <div class="form-row">
              <div class="form-group">
                <label for="conducteur-nom">Nom <span class="required">*</span></label>
                <input type="text" id="conducteur-nom" name="nom" required placeholder="Votre nom" autocomplete="family-name">
                <div class="field-error"></div>
              </div>
              <div class="form-group">
                <label for="conducteur-prenom">PrÃ©nom <span class="required">*</span></label>
                <input type="text" id="conducteur-prenom" name="prenom" required placeholder="Votre prÃ©nom" autocomplete="given-name">
                <div class="field-error"></div>
              </div>
            </div>

            <div class="form-group">
              <label for="vehicule-incident">VÃ©hicule concernÃ© <span class="required">*</span></label>
              <select id="vehicule-incident" name="vehicule" required>
                <option value="">-- SÃ©lectionner le vÃ©hicule --</option>
                <option value="TRAFIC BLANC - FV-088-JJ">TRAFIC BLANC (FV-088-JJ)</option>
                <option value="TRAFIC PMR - GT-176-AF">TRAFIC PMR (GT-176-AF)</option>
                <option value="TRAFIC VERT - EJ-374-TT">TRAFIC VERT (EJ-374-TT)</option>
                <option value="TRAFIC ROUGE - CW-819-FR">TRAFIC ROUGE (CW-819-FR)</option>
                <option value="KANGOO - DS-429-PF">KANGOO (DS-429-PF)</option>
              </select>
              <div class="field-error"></div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn btn-primary" onclick="nextStep(2)">
                Suivant <span class="btn-icon">â†’</span>
              </button>
            </div>
          </div>

          <!-- Ã‰tape 2: DÃ©tails de l'incident -->
          <div class="form-step" id="step-2">
            <h4 class="step-title">DÃ©tails de l'incident</h4>
            
            <div class="form-row">
              <div class="form-group">
                <label for="priorite">Niveau d'urgence <span class="required">*</span></label>
                <select id="priorite" name="priorite" required>
                  <option value="">-- Niveau d'urgence --</option>
                  <option value="critique">ğŸ”´ Critique - Danger immÃ©diat</option>
                  <option value="elevee">ğŸŸ  Ã‰levÃ©e - VÃ©hicule immobilisÃ©</option>
                  <option value="normale">ğŸŸ¡ Normale - ProblÃ¨me gÃªnant</option>
                  <option value="faible">ğŸŸ¢ Faible - Signalement prÃ©ventif</option>
                </select>
                <div class="field-error"></div>
              </div>
              <div class="form-group">
                <label for="type-incident">Type d'incident <span class="required">*</span></label>
                <select id="type-incident" name="type_incident" required>
                  <option value="">-- Choisir le type d'incident --</option>
                  <option value="panne-moteur">ğŸ”§ Panne de moteur</option>
                  <option value="pneu-creve">ğŸ› Pneu crevÃ©/usÃ©</option>
                  <option value="accident">ğŸš¨ Accident</option>
                  <option value="panne-batterie">ğŸ”‹ Panne de batterie</option>
                  <option value="probleme-carburant">â›½ ProblÃ¨me de carburant</option>
                  <option value="vitres-cassees">ğŸªŸ Vitres cassÃ©es</option>
                  <option value="vol-tentative">ğŸš¨ Vol ou tentative</option>
                  <option value="probleme-electrique">âš¡ ProblÃ¨me Ã©lectrique</option>
                  <option value="probleme-freins">ğŸ›‘ ProblÃ¨me de freins</option>
                  <option value="surchauffe">ğŸŒ¡ï¸ Surchauffe moteur</option>
                  <option value="cle-perdue">ğŸ—ï¸ ClÃ© perdue/cassÃ©e</option>
                  <option value="autres">â“ Autres</option>
                </select>
                <div class="field-error"></div>
              </div>
            </div>

            <div class="form-group">
              <label for="localisation">Localisation actuelle <span class="required">*</span></label>
              <div class="input-with-button">
                <input type="text" id="localisation" name="localisation" required placeholder="Adresse prÃ©cise ou point de repÃ¨re">
                <button type="button" class="btn-location" onclick="getCurrentLocation()">ğŸ“</button>
              </div>
              <small class="field-help">Soyez le plus prÃ©cis possible (adresse, km autoroutier, point de repÃ¨re)</small>
              <div class="field-error"></div>
            </div>

            <div class="form-group">
              <label for="description">Description dÃ©taillÃ©e <span class="required">*</span></label>
              <textarea id="description" name="description" rows="4" required 
                placeholder="DÃ©crivez prÃ©cisÃ©ment : 
â€¢ Que s'est-il passÃ© ?
â€¢ Quand cela a-t-il commencÃ© ?
â€¢ Y a-t-il des bruits, voyants, odeurs particuliers ?
â€¢ Le vÃ©hicule peut-il encore rouler ?
â€¢ Avez-vous dÃ©jÃ  tentÃ© quelque chose ?"></textarea>
              <div class="character-count">
                <span id="desc-count">0</span>/500 caractÃ¨res
              </div>
              <div class="field-error"></div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn btn-secondary" onclick="prevStep(1)">
                <span class="btn-icon">â†</span> PrÃ©cÃ©dent
              </button>
              <button type="button" class="btn btn-primary" onclick="nextStep(3)">
                Suivant <span class="btn-icon">â†’</span>
              </button>
            </div>
          </div>

          <!-- Ã‰tape 3: Contact et envoi -->
          <div class="form-step" id="step-3">
            <h4 class="step-title">Informations de contact</h4>
            
            <div class="form-row">
              <div class="form-group">
                <label for="telephone">NumÃ©ro de tÃ©lÃ©phone <span class="required">*</span></label>
                <input type="tel" id="telephone" name="telephone" required placeholder="06 12 34 56 78" autocomplete="tel">
                <small class="field-help">NumÃ©ro oÃ¹ vous Ãªtes joignable immÃ©diatement</small>
                <div class="field-error"></div>
              </div>
              <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" placeholder="votre.email@exemple.com" autocomplete="email">
                <small class="field-help">Pour recevoir une confirmation (optionnel)</small>
                <div class="field-error"></div>
              </div>
            </div>

            <!-- RÃ©capitulatif -->
            <div class="form-summary">
              <h5>RÃ©capitulatif de votre signalement</h5>
              <div class="summary-content">
                <div class="summary-item">
                  <strong>Conducteur:</strong> <span id="summary-conducteur">-</span>
                </div>
                <div class="summary-item">
                  <strong>VÃ©hicule:</strong> <span id="summary-vehicule">-</span>
                </div>
                <div class="summary-item">
                  <strong>Urgence:</strong> <span id="summary-priorite">-</span>
                </div>
                <div class="summary-item">
                  <strong>Type:</strong> <span id="summary-type">-</span>
                </div>
                <div class="summary-item">
                  <strong>Localisation:</strong> <span id="summary-localisation">-</span>
                </div>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn btn-secondary" onclick="prevStep(2)">
                <span class="btn-icon">â†</span> PrÃ©cÃ©dent
              </button>
              <button type="submit" id="submit-btn" class="btn btn-primary btn-submit">
                <span class="btn-icon">ğŸ“¤</span> Envoyer le Signalement
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <!-- Section Instructions d'Urgence (simplifiÃ©e) -->
    <div class="instructions-section">
      <div class="instructions-card">
        <h3>âš ï¸ En cas d'urgence immÃ©diate</h3>
        <div class="emergency-steps">
          <div class="step">
            <div class="step-number">1</div>
            <div class="step-content">
              <strong>SÃ©curisez-vous</strong>
              <p>Sortez du vÃ©hicule si possible, allumez les feux de dÃ©tresse</p>
            </div>
          </div>
          <div class="step">
            <div class="step-number">2</div>
            <div class="step-content">
              <strong>Appelez les secours si nÃ©cessaire</strong>
              <p>En cas d'accident avec blessÃ©s : 15 (SAMU) ou 112</p>
            </div>
          </div>
          <div class="step">
            <div class="step-number">3</div>
            <div class="step-content">
              <strong>Contactez l'astreinte</strong>
              <p>Appelez le 06 12 34 56 78 pour signaler l'incident vÃ©hicule</p>
            </div>
          </div>
        </div>
      </div>
    </div>

  </main>

  <script src="{{ url_for('static', filename='js/support.js') }}"></script>
</body>
</html>