<!-- Section maintenance am√©lior√©e -->
<section id="maintenance" class="content-section">
    <div class="section-header">
        <h2 class="section-title">Maintenance et contr√¥les</h2>
        <div class="section-actions">
            <button class="btn btn-primary" onclick="showModal('addMaintenanceModal')">
                <span class="icon">üîß</span>
                Programmer une maintenance
            </button>
            <button class="btn btn-export" onclick="exportMaintenanceCSV()">
                <span class="icon">üìä</span>
                Exporter
            </button>
        </div>
    </div>

    <!-- Vue d'ensemble maintenance -->
    <div class="maintenance-overview">
        <div class="maintenance-stats">
            <div class="maintenance-stat">
                <h4 id="maintenanceEnCours">1</h4>
                <p>V√©hicules en maintenance</p>
            </div>
            <div class="maintenance-stat">
                <h4 id="controlesTechniques">2</h4>
                <p>Contr√¥les techniques √† renouveler</p>
            </div>
            <div class="maintenance-stat">
                <h4 id="assurancesExpirees">0</h4>
                <p>Assurances √† renouveler</p>
            </div>
        </div>
    </div>

    <!-- Filtres -->
    <div class="filters-section">
        <div class="search-bar">
            <input type="text" id="maintenanceSearch" placeholder="Rechercher par v√©hicule, type...">
            <button class="search-btn">üîç</button>
        </div>
        <div class="filter-controls">
            <select id="maintenanceTypeFilter">
                <option value="">Tous les types</option>
                <option value="preventive">Maintenance pr√©ventive</option>
                <option value="corrective">Maintenance corrective</option>
                <option value="controle_technique">Contr√¥le technique</option>
                <option value="revision">R√©vision</option>
            </select>
            <select id="maintenanceStatusFilter">
                <option value="">Tous les statuts</option>
                <option value="planifiee">Planifi√©e</option>
                <option value="en_cours">En cours</option>
                <option value="terminee">Termin√©e</option>
            </select>
        </div>
    </div>

    <!-- Liste des maintenances -->
    <div class="maintenance-list" id="maintenanceList">
        <!-- Contenu charg√© dynamiquement -->
    </div>
</section>

<!-- Modal pour programmer une maintenance -->
<div id="addMaintenanceModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Programmer une maintenance</h2>
            <button class="modal-close" onclick="closeModal('addMaintenanceModal')">√ó</button>
        </div>
        <form id="maintenanceForm" onsubmit="handleMaintenanceForm(event)">
            <div class="form-group">
                <label for="maintenanceVehicle">V√©hicule</label>
                <select id="maintenanceVehicle" required>
                    <option value="">S√©lectionner un v√©hicule...</option>
                    <!-- Options charg√©es dynamiquement -->
                </select>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="maintenanceType">Type de maintenance</label>
                    <select id="maintenanceType" required>
                        <option value="">S√©lectionner...</option>
                        <option value="preventive">Maintenance pr√©ventive</option>
                        <option value="corrective">Maintenance corrective</option>
                        <option value="controle_technique">Contr√¥le technique</option>
                        <option value="revision">R√©vision compl√®te</option>
                        <option value="pneus">Changement pneus</option>
                        <option value="vidange">Vidange</option>
                        <option value="autre">Autre</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="maintenanceUrgency">Priorit√©</label>
                    <select id="maintenanceUrgency" required>
                        <option value="normale">Normale</option>
                        <option value="haute">Haute</option>
                        <option value="urgente">Urgente</option>
                    </select>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="maintenanceDateDebut">Date de d√©but</label>
                    <input type="datetime-local" id="maintenanceDateDebut" required>
                </div>
                <div class="form-group">
                    <label for="maintenanceDateFin">Date de fin pr√©vue</label>
                    <input type="datetime-local" id="maintenanceDateFin">
                </div>
            </div>
            
            <div class="form-group">
                <label for="maintenanceGarage">Garage / Prestataire</label>
                <input type="text" id="maintenanceGarage" placeholder="ex: Garage Dupont, Renault Service">
            </div>
            
            <div class="form-group">
                <label for="maintenanceDescription">Description / Commentaires</label>
                <textarea id="maintenanceDescription" rows="4" placeholder="D√©tails de la maintenance √† effectuer..."></textarea>
            </div>
            
            <div class="form-group">
                <label>
                    <input type="checkbox" id="maintenanceImmediateBlock" onchange="toggleImmediateBlock()">
                    Bloquer imm√©diatement le v√©hicule (passer en maintenance maintenant)
                </label>
            </div>
            
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" onclick="closeModal('addMaintenanceModal')">Annuler</button>
                <button type="submit" class="btn btn-primary">Programmer la maintenance</button>
            </div>
        </form>
    </div>
</div>